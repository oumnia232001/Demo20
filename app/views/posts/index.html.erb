<% content_for :page_title, "Index" %>

<div class="section">
  <div class="container">
    <!-- search Barre -->
    <div class="search-bar has-text-centered" style="margin-bottom: 20px;">
      <%= form_with url: posts_path, method: :get, local: true do %>
        <div class="field has-addons is-justify-content-center">
          <div class="control">
            <%= text_field_tag :query, params[:query], placeholder: "Search for...", class: "input", style: "width: 300px;" %>
          </div>
          <div class="control">
            <%= submit_tag "Rechercher", class: "button is-info" %>
          </div>
        </div>
      <% end %>
    </div>

    <!--  postes list -->
    <% if @posts.any? %>
      <% @posts.each do |post| %>
        <div class="card">
          <div class="card-content">
            <div class="media">
              <div class="media-content">
                <p class="title is-4"><%= link_to post.title, post %></p>
              </div>
            </div>
            <div class="content">
              <%= truncate(post.content, length: 100) %>
            </div>
            <div class="comment-count">
              <span class="tag is-rounded"><%= post.comments.count %> commentaires</span>
            </div>
          </div>
        </div>
      <% end %>
    <% else %>
      <p>no  poste.</p>
    <% end %>
  </div>
</div>
